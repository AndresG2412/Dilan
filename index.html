<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Solicitud de Servicios</title>
    <link rel="stylesheet" href="Estilos.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

</head>
<body>
        <div class="toggle-switch">
            <label class="switch-label">
            <input type="checkbox" class="checkbox">
            <span class="slider"></span>
            </label>
        </div> 
    <div class="container">
        <div class="form-container">
            <h2>Formulario de Solicitud de Servicios</h2>
            <form id="servicioForm">
                <label for="cliente">Nombre del Cliente:</label>
                <input type="text" id="cliente" name="cliente" placeholder="Ingresa el nombre del cliente" required oninput="soloLetras(event)">

                <label for="cedula">Cédula del Cliente:</label>
                <input type="text" id="cedula" name="cedula" placeholder="Ingresa la cédula del cliente" required oninput="soloNumeros(event)">
 
                <label for="motores">Motores:</label>
                <input type="number" id="motores" name="motores" placeholder="Cantidad de motores">

                <label for="cigueñales">Cigüeñales:</label>
                <input type="number" id="cigueñales" name="cigueñales" placeholder="Cantidad de cigüeñales">

                <label for="casquetes">Casquetes:</label>
                <input type="number" id="casquetes" name="casquetes" placeholder="Cantidad de casquetes">

                <label for="bujes_levas">Bujes de Levas:</label>
                <input type="number" id="bujes_levas" name="bujes_levas" placeholder="Cantidad de bujes de levas">

                <label for="culatas">Culatas:</label>
                <input type="number" id="culatas" name="culatas" placeholder="Cantidad de culatas">

                <label for="valvulas">Válvulas:</label>
                <input type="number" id="valvulas" name="valvulas" placeholder="Cantidad de válvulas">

                <label for="guias">Guías:</label>
                <input type="number" id="guias" name="guias" placeholder="Cantidad de guías">

                <label for="bielas">Bielas:</label>
                <input type="number" id="bielas" name="bielas" placeholder="Cantidad de bielas">

                <label for="tapas_bancada">Tapas de Bancada:</label>
                <input type="number" id="tapas_bancada" name="tapas_bancada" placeholder="Cantidad de tapas de bancada">

                <label for="resortes">Resortes:</label>
                <input type="number" id="resortes" name="resortes" placeholder="Cantidad de resortes">

                <label for="esparragos">Esparragos:</label>
                <input type="number" id="esparragos" name="esparragos" placeholder="Cantidad de esparragos">

                
                <h3>Hechura de Trabajos</h3>
                <div class="checkbox-container">
                    <label><input type="checkbox" id="encamizar_bloque" name="encamizar_bloque"> Encamizar Bloque</label>
                    <label><input type="checkbox" id="rectificar_bloque" name="rectificar_bloque"> Rectificar Bloque</label>
                    <label><input type="checkbox" id="pulir_bloque" name="pulir_bloque"> Pulir Bloque</label>
                    <label><input type="checkbox" id="pulir_cigueñal" name="pulir_cigueñal"> Pulir Cigüeñal</label>
                    <label><input type="checkbox" id="cepillar_culatas" name="cepillar_culatas"> Cepillar Culatas</label>
                    <label><input type="checkbox" id="culatas_anillos" name="culatas_anillos"> Culatas Anillos</label>
                    <label><input type="checkbox" id="bases_valvulas" name="bases_valvulas"> Ajuste de Bases y Válvulas</label>
                    <label><input type="checkbox" id="rimar_guias" name="rimar_guias"> Rimar Guías</label>
                    <label><input type="checkbox" id="rimar_bielas" name="rimar_bielas"> Rimar Bielas</label>
                    <label><input type="checkbox" id="cambio_guias" name="cambio_guias"> Cambio de Guías</label>
                    <label><input type="checkbox" id="cambio_buje" name="cambio_buje"> Cambio de Buje</label>
                    <label><input type="checkbox" id="rebajar_buje" name="rebajar_buje"> Rebajar Buje</label>
                    <label><input type="checkbox" id="circulo_bancada" name="circulo_bancada"> Círculo de Bancada</label>
                    <label><input type="checkbox" id="devolvedor_aceite" name="devolvedor_aceite"> Devolvedor de Aceite</label>
                    <label><input type="checkbox" id="rebajar_pistones" name="rebajar_pistones"> Rebajar Pistones</label>
                    <label><input type="checkbox" id="cambio_pinon" name="cambio_pinon"> Cambio de Piñón</label>
                    <label><input type="checkbox" id="ensamblaje_bielas" name="ensamblaje_bielas"> Ensamblaje de Bielas</label>
                    <label><input type="checkbox" id="lavado_motor" name="lavado_motor"> Lavado del Motor</label>
                </div>

                <label for="varios">Detalles:</label>
                <input type="text" id="varios" name="varios" placeholder="Observacion... (Especifica)">

                <button type="button" onclick="agregarOrden()">Agregar Orden</button>
            </form>
        </div>

        <h2>Órdenes de Reparación</h2>
        <div class="fecha-filtro">
            <label for="fechaInicio">Fecha Inicio:</label>
            <input type="date" id="fechaInicio" onchange="filtrarOrdenesPorFecha()">
            <label for="fechaFin">Fecha Fin:</label>
            <input type="date" id="fechaFin" onchange="filtrarOrdenesPorFecha()">
            
            <button type="button" onclick="limpiarFiltrosReparacion()">Limpiar Filtros</button>
        
            <label for="filtro-estado">Filtrar por Estado:</label>
            <select id="filtro-estado" onchange="filtrarOrdenesPorEstado()">
            <option value="todos">Todos</option>
            <option value="pendiente">Pendiente</option>
            <option value="en_progreso">En Progreso</option>
            <option value="completado">Completado</option>
            </select>
        </div>
        
            <div class="search-bar">
            <input type="text" id="buscador" placeholder="Buscar orden por cliente..." onkeyup="buscarOrden()">
            <span class="search-icon">&#128269;</span>
            </div>
            <button id="ordenarReparacion" onclick="ordenarPorNombre('reparacion')">Ordenar ordenes por nombre</button>
        <ul id="listaOrdenes"></ul>

        <div id="paginacionIndicadorReparacion" class="pagination-indicator"></div>

        
            <div class="download-container">
                <button id="downloadOrdenesReparacion" onclick="descargarOrdenes('ordenes')">Descargar Órdenes de Reparación</button>
            </div>

            <div id="detalleOrdenReparacion" style="display: none;">
                <h3>Detalle de la Orden en Reparación</h3>
                <p><strong>Cliente:</strong> <span id="detalleClienteReparacion"></span></p>
                <p><strong>Cédula:</strong> <span id="detalleCedulaReparacion"></span></p> 
                <p><strong>Tiempo Estimado:</strong> <span id="detalleTiempoReparacion"></span></p>
                <p><strong>Fecha de Creación:</strong> <span id="detalleFechaReparacion"></span></p>
                <p><strong>Varios:</strong> <span id="detalleVariosReparacion"></span></p>
                <h4>Servicios Solicitados</h4>
                <ul id="detalleServiciosReparacion"></ul>
                <button onclick="cerrarDetalleReparacion()">Cerrar</button>
            </div>            
            <section id="ordenesRealizadas">
                <h2>Órdenes Realizadas</h2>
                <div class="fecha-filtro">
                    <label for="fechaInicioCompletadas">Fecha Inicio:</label>
                    <input type="date" id="fechaInicioCompletadas" onchange="filtrarOrdenesCompletadasPorFecha()">
                    <label for="fechaFinCompletadas">Fecha Fin:</label>
                    <input type="date" id="fechaFinCompletadas" onchange="filtrarOrdenesCompletadasPorFecha()">
                    
                    <button type="button" onclick="limpiarFiltrosRealizadas()">Limpiar Filtros</button>
                </div>
                <div class="search-bar">
                    <input type="text" id="buscadorCompletadas" placeholder="Buscar orden completada..." onkeyup="buscarOrdenCompletada()">
                    <span class="search-icon">&#128269;</span> 
                </div>

                <button id="ordenarCompletadas" onclick="ordenarPorNombre('completadas')">Ordenar ordenes por nombre</button>
                
                <ul id="listaOrdenesCompletadas"></ul>

                <div id="paginacionIndicadorRealizadas" class="pagination-indicator"></div>
                    
                    <div class="download-container">
                    <button id="downloadOrdenesRealizadas" on
                    click="descargarOrdenes('ordenesCompletadas')">Descargar Órdenes Realizadas</button>
                    </div>
                    <div id="detalleOrdenRealizada" style="display: none;">
                        <h3>Detalle de la Orden Realizada</h3>
                        <p><strong>Cliente:</strong> <span id="detalleClienteRealizada"></span></p>
                        <p><strong>Cédula:</strong> <span id="detalleCedulaRealizada"></span></p>
                        <p><strong>Estado de Cumplimiento:</strong> <span id="detalleEstadoRealizada"></span></p>
                        <p><strong>Tiempo Estimado:</strong> <span id="detalleTiempoEstimadoRealizada"></span></p>
                        <p><strong>Fecha de Creación:</strong> <span id="detalleFechaRealizada"></span></p>
                        <p><strong>Fecha Completada:</strong> <span id="detalleFechaCompletadaRealizada"></span></p>
                        <p><strong>Tiempo Real:</strong> <span id="detalleTiempoReal"></span></p>
                        <p><strong>Varios:</strong> <span id="detalleVariosRealizada"></span></p>
                        <h4>Servicios Solicitados</h4>
                        <ul id="detalleServiciosRealizada"></ul>
                        <button onclick="cerrarDetalleRealizada()">Cerrar</button>
                    </div>
                </div>
            </section>

            <h2>Ocupación de las Máquinas</h2>
            <div id="ocupacionMaquinas"></div>

            <h2>Servicios disponibles segun la capacidad de las maquinas</h2>
            <div id="capacidadesMaquinas"></div>

            <h2>Estadísticas de Servicios</h2>

            <div class="chart-container">
                <canvas id="serviciosPorDiaChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="ordenesCompletadasChart"></canvas>
            </div>

        </div>
    </div>
    
    <script src="Script.js"></script>
</body>
</html>
